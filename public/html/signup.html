<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup</title>
    <link rel="stylesheet" href="/public/css/signup.css" />
    <link rel="stylesheet" href="/public/css/apple-fonts.css" />
  </head>
  <body>
    <form action="" method="">
      <h1>Signup</h1>

      <input
        type="email"
        name="email"
        id="email"
        placeholder="Email"
        autocomplete="off"
        required
      />
      <input
        type="password"
        name="password"
        id="password"
        placeholder="Password"
        autocomplete="off"
        required
      />
      <input
        type="text"
        name="username"
        id="username"
        placeholder="Username"
        autocomplete="off"
        required
        autocapitalize=""
      />
      <p>
        Already have an account? <a href="/public/html/login.html">Login</a>
      </p>
      <h3>Select the catagories of your interest!</h3>
      <div class="checkboxes">
        <input
          type="checkbox"
          name="categories"
          id="world"
          value="World"
          hidden
        />
        <label for="world">World</label>

        <input
          type="checkbox"
          name="categories"
          id="business"
          value="Business"
          hidden
        />
        <label for="business">Business</label>

        <input
          type="checkbox"
          name="categories"
          id="politics"
          value="Politics"
          hidden
        />
        <label for="politics">Politics</label>

        <input
          type="checkbox"
          name="categories"
          id="technology"
          value="Technology"
          hidden
        />
        <label for="technology">Technology</label>

        <input
          type="checkbox"
          name="categories"
          id="science"
          value="Science"
          hidden
        />
        <label for="science">Science</label>

        <input
          type="checkbox"
          name="categories"
          id="health"
          value="Health"
          hidden
        />
        <label for="health">Health</label>

        <input
          type="checkbox"
          name="categories"
          id="environment"
          value="Environment"
          hidden
        />
        <label for="environment">Environment</label>

        <input
          type="checkbox"
          name="categories"
          id="education"
          value="Education"
          hidden
        />
        <label for="education">Education</label>

        <input
          type="checkbox"
          name="categories"
          id="crime"
          value="Crime"
          hidden
        />
        <label for="crime">Crime</label>

        <input
          type="checkbox"
          name="categories"
          id="entertainment"
          value="Entertainment"
          hidden
        />
        <label for="entertainment">Entertainment</label>

        <input
          type="checkbox"
          name="categories"
          id="sports"
          value="Sports"
          hidden
        />
        <label for="sports">Sports</label>

        <input
          type="checkbox"
          name="categories"
          id="fashion"
          value="Fashion"
          hidden
        />
        <label for="fashion">Fashion</label>

        <input
          type="checkbox"
          name="categories"
          id="travel"
          value="Travel"
          hidden
        />
        <label for="travel">Travel</label>

        <input
          type="checkbox"
          name="categories"
          id="food"
          value="Food"
          hidden
        />
        <label for="food">Food</label>

        <input
          type="checkbox"
          name="categories"
          id="arts"
          value="Arts"
          hidden
        />
        <label for="arts">Arts</label>

        <input
          type="checkbox"
          name="categories"
          id="opinion"
          value="Opinion"
          hidden
        />
        <label for="opinion">Opinion</label>

        <input
          type="checkbox"
          name="categories"
          id="lifestyle"
          value="Lifestyle"
          hidden
        />
        <label for="lifestyle">Lifestyle</label>

        <input
          type="checkbox"
          name="categories"
          id="weird"
          value="Weird"
          hidden
        />
        <label for="weird">Weird</label>

        <input type="checkbox" name="categories" id="war" value="War" hidden />
        <label for="war">War</label>

        <input
          type="checkbox"
          name="categories"
          id="disaster"
          value="Disaster"
          hidden
        />
        <label for="disaster">Disaster</label>

        <input
          type="checkbox"
          name="categories"
          id="innovation"
          value="Innovation"
          hidden
        />
        <label for="innovation">Innovation</label>

        <input
          type="checkbox"
          name="categories"
          id="economy"
          value="Economy"
          hidden
        />
        <label for="economy">Economy</label>

        <input
          type="checkbox"
          name="categories"
          id="space"
          value="Space"
          hidden
        />
        <label for="space">Space</label>

        <input
          type="checkbox"
          name="categories"
          id="gaming"
          value="Gaming"
          hidden
        />
        <label for="gaming">Gaming</label>

        <input
          type="checkbox"
          name="categories"
          id="history"
          value="History"
          hidden
        />
        <label for="history">History</label>

        <input type="checkbox" name="categories" id="law" value="Law" hidden />
        <label for="law">Law</label>

        <input
          type="checkbox"
          name="categories"
          id="diplomacy"
          value="Diplomacy"
          hidden
        />
        <label for="diplomacy">Diplomacy</label>

        <input
          type="checkbox"
          name="categories"
          id="infrastructure"
          value="Infrastructure"
          hidden
        />
        <label for="infrastructure">Infrastructure</label>

        <input
          type="checkbox"
          name="categories"
          id="humanrights"
          value="Human Rights"
          hidden
        />
        <label for="humanrights">Human Rights</label>

        <input
          type="checkbox"
          name="categories"
          id="religion"
          value="Religion"
          hidden
        />
        <label for="religion">Religion</label>

        <input
          type="checkbox"
          name="categories"
          id="climate"
          value="Climate"
          hidden
        />
        <label for="climate">Climate</label>

        <input
          type="checkbox"
          name="categories"
          id="security"
          value="Security"
          hidden
        />
        <label for="security">Security</label>

        <input
          type="checkbox"
          name="categories"
          id="media"
          value="Media"
          hidden
        />
        <label for="media">Media</label>

        <input
          type="checkbox"
          name="categories"
          id="diversity"
          value="Diversity"
          hidden
        />
        <label for="diversity">Diversity</label>

        <input
          type="checkbox"
          name="categories"
          id="immigration"
          value="Immigration"
          hidden
        />
        <label for="immigration">Immigration</label>

        <input
          type="checkbox"
          name="categories"
          id="agriculture"
          value="Agriculture"
          hidden
        />
        <label for="agriculture">Agriculture</label>

        <input
          type="checkbox"
          name="categories"
          id="energy"
          value="Energy"
          hidden
        />
        <label for="energy">Energy</label>

        <input
          type="checkbox"
          name="categories"
          id="archaeology"
          value="Archaeology"
          hidden
        />
        <label for="archaeology">Archaeology</label>

        <input
          type="checkbox"
          name="categories"
          id="medicine"
          value="Medicine"
          hidden
        />
        <label for="medicine">Medicine</label>

        <input
          type="checkbox"
          name="categories"
          id="psychology"
          value="Psychology"
          hidden
        />
        <label for="psychology">Psychology</label>

        <input
          type="checkbox"
          name="categories"
          id="conspiracy"
          value="Conspiracy"
          hidden
        />
        <label for="conspiracy">Conspiracy</label>

        <input
          type="checkbox"
          name="categories"
          id="paranormal"
          value="Paranormal"
          hidden
        />
        <label for="paranormal">Paranormal</label>

        <input
          type="checkbox"
          name="categories"
          id="economics"
          value="Economics"
          hidden
        />
        <label for="economics">Economics</label>

        <input
          type="checkbox"
          name="categories"
          id="finance"
          value="Finance"
          hidden
        />
        <label for="finance">Finance</label>

        <input
          type="checkbox"
          name="categories"
          id="startups"
          value="Startups"
          hidden
        />
        <label for="startups">Startups</label>

        <input
          type="checkbox"
          name="categories"
          id="marketing"
          value="Marketing"
          hidden
        />
        <label for="marketing">Marketing</label>

        <input
          type="checkbox"
          name="categories"
          id="analysis"
          value="Analysis"
          hidden
        />
        <label for="analysis">Analysis</label>

        <input
          type="checkbox"
          name="categories"
          id="awards"
          value="Awards"
          hidden
        />
        <label for="awards">Awards</label>

        <input
          type="checkbox"
          name="categories"
          id="obituaries"
          value="Obituaries"
          hidden
        />
        <label for="obituaries">Obituaries</label>
      </div>
      <input type="submit" />
    </form>
  </body>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

    const supabase = createClient(
      'https://kkbnmbipxjyfsbbjgpns.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtrYm5tYmlweGp5ZnNiYmpncG5zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQyMjE4NzksImV4cCI6MjAyOTc5Nzg3OX0.QJyKczIGh-Jx0yYk_7pY9o19rWH-qyuVoW199BtHaBA'
    );

    const form = document.querySelector('form');

    form.addEventListener('submit', async function (event) {
      event.preventDefault();

      const selectedCategories = [];
      const checkboxes = document.querySelectorAll(
        'input[name="categories"]:checked'
      );

      checkboxes.forEach((checkbox) => {
        selectedCategories.push(checkbox.value);
      });

      const categoriesString = selectedCategories.join(',');

      const formData = new FormData(form);
      const email = formData.get('email');
      const password = formData.get('password');
      const username = formData.get('username');
      const categories = categoriesString;

      const input = { email, password, username, categories };

      const { error, data } = await supabase.from('scout').insert([input]);
      console.log({ error, data });
      window.location.href = 'login.html';
    });
  </script>
</html>
